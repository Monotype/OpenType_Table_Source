

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Source Data Format for OpenType Layout Tables &mdash; OpenType Layout Table Source 1.0.0 Documentation</title>
    
    <link rel="stylesheet" href="static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/bizstyle.js"></script>
    <link rel="top" title="OpenType Layout Table Source 1.0.0 Documentation" href="#" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">OpenType Layout Table Source 1.0.0 Documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Source Data Format for OpenType Layout Tables</a><ul>
<li><a class="reference internal" href="#source-format-definition">Source Format Definition</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#opentype-layout-source-files">OpenType Layout Source Files</a></li>
<li><a class="reference internal" href="#comments-and-whitespace">Comments and Whitespace</a></li>
<li><a class="reference internal" href="#glyph-references">Glyph References</a></li>
<li><a class="reference internal" href="#lookups">Lookups</a></li>
<li><a class="reference internal" href="#feature-table">Feature Table</a></li>
<li><a class="reference internal" href="#script-table">Script Table</a><ul>
<li><a class="reference internal" href="#single-substitution">single (substitution)</a></li>
<li><a class="reference internal" href="#multiple-substitution">multiple (substitution)</a></li>
<li><a class="reference internal" href="#alternate-substitution">alternate (substitution)</a></li>
<li><a class="reference internal" href="#ligature-substitution">ligature (substitution)</a></li>
<li><a class="reference internal" href="#single-positioning">single (positioning)</a></li>
<li><a class="reference internal" href="#pair-or-kernset-positioning">pair or kernset (positioning)</a></li>
<li><a class="reference internal" href="#cursive-positioning">cursive (positioning)</a></li>
<li><a class="reference internal" href="#mark-to-base-and-mark-to-mark-positioning">mark to base and mark to mark (positioning)</a></li>
<li><a class="reference internal" href="#mark-to-ligature-positioning">mark to ligature (positioning)</a></li>
<li><a class="reference internal" href="#context-substitution-and-positioning">context (substitution and positioning)</a></li>
<li><a class="reference internal" href="#chained-substitution-and-positioning">chained (substitution and positioning)</a></li>
<li><a class="reference internal" href="#reversechained-substitution">reversechained (substitution)</a></li>
<li><a class="reference internal" href="#shared-by-various-lookups">Shared by various lookups</a></li>
<li><a class="reference internal" href="#more-about-chained-context">More about chained context</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gdef-table">GDEF Table</a><ul>
<li><a class="reference internal" href="#glyph-classes">Glyph Classes</a></li>
<li><a class="reference internal" href="#attachment-point-list">Attachment Point List</a></li>
<li><a class="reference internal" href="#ligature-caret-lists">Ligature Caret Lists</a></li>
<li><a class="reference internal" href="#mark-attachment-classes">Mark Attachment Classes</a></li>
<li><a class="reference internal" href="#mark-glyph-sets-mark-filtering-sets">Mark Glyph Sets (Mark Filtering Sets)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="source-data-format-for-opentype-layout-tables">
<h1>Source Data Format for OpenType Layout Tables<a class="headerlink" href="#source-data-format-for-opentype-layout-tables" title="Permalink to this headline">¶</a></h1>
<div class="section" id="source-format-definition">
<h2>Source Format Definition<a class="headerlink" href="#source-format-definition" title="Permalink to this headline">¶</a></h2>
<p>Copyright © 2015 Monotype Imaging Inc. <a class="reference external" href="http://www.monotype.com/">http://www.monotype.com/</a> All rights reserved. This document is available under a Creative Commons <a class="reference external" href="http://creativecommons.org/licenses/by-nd/4.0/">License</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This document assumes familiarity with the OpenType specification where it introduces the Layout tables. Detailed knowledge of the inner workings of these tables is not needed, as long as one understands what they do and how to put them to use.</p>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#opentype-layout-source-files" id="id2">OpenType Layout Source Files</a></li>
<li><a class="reference internal" href="#comments-and-whitespace" id="id3">Comments and Whitespace</a></li>
<li><a class="reference internal" href="#glyph-references" id="id4">Glyph References</a></li>
<li><a class="reference internal" href="#lookups" id="id5">Lookups</a></li>
<li><a class="reference internal" href="#feature-table" id="id6">Feature Table</a></li>
<li><a class="reference internal" href="#script-table" id="id7">Script Table</a></li>
<li><a class="reference internal" href="#gdef-table" id="id8">GDEF Table</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h3><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Beginning in 1999 Monotype needed the ability to create, view and debug fonts with OpenType Layout tables. A text representation of the OpenType
tables (GSUB, GPOS, and GDEF) was created that follows the actual structure of the tables so that these source files could be compiled into
binary format and vice versa. This document describes the format of such source files. With appropriate tools such files can be converted to binary data and
inserted into fonts.</p>
<p>In formulating the source format, the choice was made to use a text representation that follows the actual structure of the tables, but machine readable translated into human readable as much as possible.
So there is a separation of lookups from each other and from the assignment of lookups to features and features to languages and scripts, rather than using a description
that mixes these elements together. When a GSUB or GPOS source is compiled and decompiled, the results should match. There may be differences in the ordering within lookups
however, because the binary encoding usually forces a certain glyph index ordering, which does not need to be present in the text source.</p>
<p>For the most part the OpenType Layout tables consist of rather simple lists: glyph substitution lists, glyph enumeration or classification lists,
glyphs with values. These lists lend themselves very well to be viewed and edited in rows and columns. The text sources are therefore made up of
tab (ascii 9, ‘\t’, etc.) delimited lines, that can easily be exchanged with spreadsheet documents, without mark-up tags or key-words getting in
the way. However care should be taken to remove trailing tabs from text files before compiling since the tabs are often used to count the number
of glyphs or values in a line and it is possible to confuse a compiler with “empty entries” in a line. Most text editors allow a <em>Replace All</em>
operation on the sequence “tab-return” into “return”. This needs to be repeated until 0 replacements are reported.
In this document tabs are referred to by <strong>&lt;T&gt;</strong>.</p>
</div>
<div class="section" id="opentype-layout-source-files">
<h3><a class="toc-backref" href="#id2">OpenType Layout Source Files</a><a class="headerlink" href="#opentype-layout-source-files" title="Permalink to this headline">¶</a></h3>
<p>The OpenType Layout (OTL) source files may be used to represent three tables: GSUB, GPOS, and GDEF.</p>
<dl class="docutils">
<dt>The first line of a text file representing a GSUB is:</dt>
<dd><div class="first last highlight-none"><div class="highlight"><pre>FontDame GSUB table
</pre></div>
</div>
</dd>
<dt>The first line of a text file representing a GPOS is:</dt>
<dd><div class="first last highlight-none"><div class="highlight"><pre>FontDame GPOS table
</pre></div>
</div>
</dd>
<dt>The first line of a text file representing a GDEF is:</dt>
<dd><div class="first last highlight-none"><div class="highlight"><pre>FontDame GDEF table
</pre></div>
</div>
</dd>
</dl>
<p>These first lines are case sensitive. Other keywords are not case sensitive.
However one is encouraged to use lowercase for legibility!</p>
<p>GPOS and GSUB tables consist of three types of elements: one script list per table, one
feature list and any number of lookups. Each of these elements are represented
by a block starting with a keyword. Any line outside these blocks, not starting
with a keyword, is ignored by the compiler and can be used for comments.</p>
<p>There is one additional keyword for the GPOS table only. The EM keyword at the beginning of the file, before the first lookup, allows to declare the EM-square that the font unit values are referring to and should allow the transfer of values between fonts with different EM resolutions. Without the declaration of the EM within the GPOS text file, it is assumed to equal to that of the font, the file is used for.
The format is:</p>
<div class="highlight-python"><div class="highlight"><pre>EM &lt;T&gt; decimal value
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The inclusion of the EM value is informational. It also allows the sharing of GPOS source between TTF and OTF fonts that use different EM values, if used with a compiler that re-scales values appropriately.</p>
</div>
</div>
<div class="section" id="comments-and-whitespace">
<h3><a class="toc-backref" href="#id3">Comments and Whitespace</a><a class="headerlink" href="#comments-and-whitespace" title="Permalink to this headline">¶</a></h3>
<p>Anything which is outside a block describing a lookup, the script table and feature table is ignored. That means you can use lines between these blocks as a place to put comments, such as reminders what lookups do.
If needed it is possible to insert comments inside lookup blocks by having lines start with the percent sign:</p>
<div class="highlight-python"><div class="highlight"><pre>% this is a comment.
</pre></div>
</div>
<p>Blank lines and white space are ignored.</p>
</div>
<div class="section" id="glyph-references">
<h3><a class="toc-backref" href="#id4">Glyph References</a><a class="headerlink" href="#glyph-references" title="Permalink to this headline">¶</a></h3>
<p>Glyphs are usually represented by their name from the &#8216;post&#8217; table or &#8216;CFF &#8216;
table. If there is no format 2 post table or no names stored in the &#8216;CFF &#8216;
table then it is possible to refer to glyphs by Unicode or by glyph index.</p>
<p>To refer to a glyph by Unicode use <em>U</em> or <em>u</em> followed by a space, followed by the
hexadecimal Unicode. To refer to a glyph by index use a <em>#</em> followed by a space
followed by the index in decimal. For example: in a normal Latin font in
standard order the lowercase <em>a</em> can be referred to in the following ways:</p>
<div class="highlight-python"><div class="highlight"><pre>a
U 0061
u 0061
# 68
</pre></div>
</div>
<p>When decompiling a table to OTL Source format, a tool should use the
&#8216;post&#8217; or &#8216;CFF &#8216; table name when possible. If no name can be obtained from
either of those, it next attempts to use a Unicode reference. If a Unicode
cannot be obtained, the last resort is using the glyph index. In this document
glyphs in any of these 3 formats are referred to as <strong>&lt;Gl&gt;</strong>.</p>
</div>
<div class="section" id="lookups">
<h3><a class="toc-backref" href="#id5">Lookups</a><a class="headerlink" href="#lookups" title="Permalink to this headline">¶</a></h3>
<p>In OpenType Layout tables all info regarding substitutions and positioning is stored in so-called lookup tables: lists with glyphs and values. In text format of each of these lists begins with:</p>
<div class="highlight-python"><div class="highlight"><pre>lookup &lt;T&gt; label &lt;T&gt; lookup type
</pre></div>
</div>
<p>and ends with:</p>
<div class="highlight-python"><div class="highlight"><pre>lookup end
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Label</strong></dt>
<dd>A label can be anything which doesn&#8217;t have a tab or return in it, a
description of the content for example. In decompiled lookups it is the
index number of the lookup. These labels are used in the feature table to
tie the lookup to a feature. They are also used in context or chained
context lookups to tie a <a class="reference internal" href="#contextrule"><span>rule</span></a> to a lookup.</dd>
<dt><strong>Lookup Type</strong></dt>
<dd><p class="first">Describes the type of lookup. The following keywords are used to identify
the various lookup types:</p>
<ul class="last simple">
<li><strong>single</strong>: <a class="reference internal" href="#gsub-type-1"><span>GSUB lookup type 1</span></a> or <a class="reference internal" href="#gpos-type-1"><span>GPOS lookup type 1</span></a></li>
<li><strong>multiple</strong>: <a class="reference internal" href="#gsub-type-2"><span>GSUB lookup type 2</span></a></li>
<li><strong>alternate</strong>: <a class="reference internal" href="#gsub-type-3"><span>GSUB lookup type 3</span></a></li>
<li><strong>ligature</strong>: <a class="reference internal" href="#gsub-type-4"><span>GSUB lookup type 4</span></a></li>
<li><strong>pair</strong> or <strong>kernset</strong>: <a class="reference internal" href="#gpos-type-2"><span>GPOS lookup type 2</span></a></li>
<li><strong>cursive</strong>: <a class="reference internal" href="#gpos-type-3"><span>GPOS lookup type 3</span></a></li>
<li><strong>mark to base</strong>: <a class="reference internal" href="#gpos-type-4"><span>GPOS lookup type 4</span></a></li>
<li><strong>mark to ligature</strong>: <a class="reference internal" href="#gpos-type-5"><span>GPOS lookup type 5</span></a></li>
<li><strong>mark to mark</strong>: <a class="reference internal" href="#gpos-type-4"><span>GPOS lookup type 6</span></a></li>
<li><strong>context</strong>: <a class="reference internal" href="#gsub-gpos-context"><span>GSUB lookup type 5 or GPOS lookup type 7</span></a></li>
<li><strong>chained</strong>: <a class="reference internal" href="#gsub-gpos-chained"><span>GSUB lookup type 6 or GPOS lookup type 8</span></a></li>
<li><strong>reversechained</strong>: <a class="reference internal" href="#gsub-type-8"><span>GSUB lookup type 8</span></a></li>
</ul>
</dd>
<dt><strong>Lookup Flags</strong></dt>
<dd><p class="first">Each lookup has four flags values and an optional mark attachment type
associated with it, which can be set at the beginning of the lookup block:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FlagType</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">FlagSetting</span>
</pre></div>
</div>
<p>The flag settings are <code class="docutils literal"><span class="pre">yes</span></code> or <code class="docutils literal"><span class="pre">no</span></code>. Flag types are:</p>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">RightToLeft</span></code></dt>
<dd><p class="first last">When set to <code class="docutils literal"><span class="pre">yes</span></code>, indicates that the lookup applies to right to left
scripts such as Arabic. As of OpenType 1.3 only to be used for cursive
attachment lookups, but it is often set for Arabic in older fonts.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">IgnoreBaseGlyphs</span></code></dt>
<dd><p class="first last">When the lookup is applied, all glyphs classified as base in the GDEF
table are ignored, when set to <code class="docutils literal"><span class="pre">yes</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">IgnoreLigatures</span></code></dt>
<dd><p class="first last">When the lookup is applied, all glyphs classified as ligature in the
GDEF table are ignored, when set to <code class="docutils literal"><span class="pre">yes</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">IgnoreMarks</span></code></dt>
<dd><p class="first last">When the lookup is applied, all glyphs classified as mark in the GDEF
table are ignored, when set to <code class="docutils literal"><span class="pre">yes</span></code>.</p>
</dd>
</dl>
</li>
</ul>
<p class="last">If a flag is not listed in the lookup, the default value <code class="docutils literal"><span class="pre">no</span></code> is used.</p>
</dd>
<dt><strong>Mark Attachment</strong></dt>
<dd><p class="first">The Mark Attachment Type is an optional part of the lookup flags which can
be used to have marks ignored except for one specified class of marks:</p>
<div class="highlight-python"><div class="highlight"><pre>markattachmenttype &lt;T&gt; mark class number
</pre></div>
</div>
<p>For example, in Telugu, this is used where subscript consonant marks need to
be attached to base consonant glyphs with a mark to base lookup, while
between base and subscripts there can be other types of marks. By setting
the mark attachment type to the class of the subscript marks, the other
marks are ignored. By having <code class="docutils literal"><span class="pre">IgnoreMarks</span> <span class="pre">no</span></code> and <code class="docutils literal"><span class="pre">markattachmenttype</span></code>
specifying a class, you have an Ignoremarks setting which is between yes
and no: &#8220;IgnoreMarks other than these&#8221;.</p>
<p class="last">In order to use this you need a GDEF with a MarkAttachmentClass table.</p>
</dd>
<dt><strong>Mark Filtering</strong></dt>
<dd><p class="first">Another optional lookup flag is <code class="docutils literal"><span class="pre">markfiltertype</span></code>. This key, followed by a
&lt;T&gt; and a single number representing a glyph set index (defined in the GDEF
table) allows behavior similar to mark attachment classes. The advantage of
this over mark attachment classes is that a glyph may belong to multiple
glyph sets.</p>
<p>Note that the use of this is mutually exclusive with <code class="docutils literal"><span class="pre">markattachmenttype</span></code>
per lookup. As such, if both flags are encountered for a single lookup,
only the <code class="docutils literal"><span class="pre">markfiltertype</span></code> should be used.</p>
<p class="last">The set number specified for <code class="docutils literal"><span class="pre">markfiltertype</span></code> must be defined in the
GDEF. If the set number is out-of-range, a warning should be issued and no
filtering should be applied.</p>
</dd>
<dt><strong>Subtables</strong></dt>
<dd>Use <code class="docutils literal"><span class="pre">%</span> <span class="pre">subtable</span></code> or <code class="docutils literal"><span class="pre">subtable</span> <span class="pre">end</span></code> end to mark a subtable boundary. Use <code class="docutils literal"><span class="pre">lookup</span> <span class="pre">end</span></code> (not <code class="docutils literal"><span class="pre">subtable</span> <span class="pre">end</span></code>) to terminate the final subtable of a lookup (or lookups with only one subtable).</dd>
</dl>
</div>
<div class="section" id="feature-table">
<h3><a class="toc-backref" href="#id6">Feature Table</a><a class="headerlink" href="#feature-table" title="Permalink to this headline">¶</a></h3>
<p>The feature table is used to assign lookups to features. These assignments are
done within a block starting with:</p>
<div class="highlight-python"><div class="highlight"><pre>feature table begin
</pre></div>
</div>
<p>and ending with:</p>
<div class="highlight-python"><div class="highlight"><pre>feature table end
</pre></div>
</div>
<p>Within the block assignments are done in one line for each feature:</p>
<div class="highlight-python"><div class="highlight"><pre>index &lt;T&gt; feature tag &lt;T&gt; list of lookups
</pre></div>
</div>
<p>The index is a number starting with 0 for the first entry. These numbers are
ignored by the compiler but can be used as a reminder when the features are
assigned to a script or language in the script table.</p>
<p>The feature tag is one of the four character feature tags as they are published
in the OpenType specification.</p>
<p>The list of lookups contains the label of one or more lookup tables, separated
by commas. If for some reason (it is sometimes necessary) to declare a feature
without lookups, then a hyphen takes in the position of the list.</p>
<p><a class="reference download internal" href="downloads/featuretable.txt"><code class="xref download docutils literal"><span class="pre">Feature</span> <span class="pre">table</span> <span class="pre">example</span></code></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Normally features are expected to be listed in alphabetical order in feature lists, in the same way that they are stored in the font. But it is often easier to have a source file with the features in the order in which they are applied, i.e. following the lookup order. Features are expected to be sorted when the feature list is compiled.</p>
</div>
</div>
<div class="section" id="script-table">
<h3><a class="toc-backref" href="#id7">Script Table</a><a class="headerlink" href="#script-table" title="Permalink to this headline">¶</a></h3>
<p>The script table is used to assign features to scripts or languages. These
assignments are done within a block starting with:</p>
<div class="highlight-python"><div class="highlight"><pre>script table begin
</pre></div>
</div>
<p>and (predictably) ending with:</p>
<div class="highlight-python"><div class="highlight"><pre>script table end
</pre></div>
</div>
<p>Within the block assignments are done in one line for each script/language:</p>
<div class="highlight-python"><div class="highlight"><pre>script tag &lt;T&gt; language tag &lt;T&gt; requiredFeature &lt;T&gt; list of features
</pre></div>
</div>
<p>The script tag is one of the four character script tags as they are published
in the OpenType specification.</p>
<p>The language tag is one of the 3 character language script tags as published in
the OpenType specification. If the features need to be applied to the script in
general instead if one language in particular use the keyword <code class="docutils literal"><span class="pre">default</span></code>.</p>
<p>The required feature entry can contain one index number of one of the features
in the feature table. However in most cases this field is empty, as it is an
OpenType recommendation not to use required features. Make sure an extra &lt;T&gt;
for an empty required feature is present.</p>
<p>The list of features contains one or more indices of feature definitions as
they are used in the feature table. Entries are separated by commas. It is
sometimes necessary to have an entry of a particular script in either GPOS or
GSUB, although there are no features using that table, but without the entry
the features in the other table are ignored. In that case the entry in the list
of features field can be empty as well.</p>
<p><a class="reference download internal" href="downloads/scripttable.txt"><code class="xref download docutils literal"><span class="pre">Script</span> <span class="pre">table</span> <span class="pre">example</span></code></a></p>
<hr class="docutils" />
<div class="section" id="single-substitution">
<span id="gsub-type-1"></span><h4>single (substitution)<a class="headerlink" href="#single-substitution" title="Permalink to this headline">¶</a></h4>
<p>Two entries per line; replaces the input glyph by the output glyph:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;input Gl&gt; &lt;T&gt; &lt;output Gl&gt;
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gsubsingle.txt"><code class="xref download docutils literal"><span class="pre">GSUB</span> <span class="pre">single</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="multiple-substitution">
<span id="gsub-type-2"></span><h4>multiple (substitution)<a class="headerlink" href="#multiple-substitution" title="Permalink to this headline">¶</a></h4>
<p>At last two entries per line; replaces the input glyph by one or more output glyphs:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;input Gl&gt; &lt;T&gt; &lt;output Gl 1&gt; &lt;T&gt; &lt;output Gl 2&gt; ....
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gsubmultiple.txt"><code class="xref download docutils literal"><span class="pre">GSUB</span> <span class="pre">multiple</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="alternate-substitution">
<span id="gsub-type-3"></span><h4>alternate (substitution)<a class="headerlink" href="#alternate-substitution" title="Permalink to this headline">¶</a></h4>
<p>At least two entries per line; Replaces the input glyph by one of the output glyphs:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;input Gl&gt; &lt;T&gt; &lt;output Gl 1&gt; &lt;T&gt; &lt;output Gl 2&gt; ....
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gsubalternate.txt"><code class="xref download docutils literal"><span class="pre">GSUB</span> <span class="pre">alternate</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="ligature-substitution">
<span id="gsub-type-4"></span><h4>ligature (substitution)<a class="headerlink" href="#ligature-substitution" title="Permalink to this headline">¶</a></h4>
<p>At least two entries per line; Replaces the input glyphs by one ligature (the first entry):</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;ligature Gl&gt; &lt;T&gt; &lt;input Gl 1&gt; &lt;T&gt; &lt;input Gl 2&gt; ....
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gsubligature.txt"><code class="xref download docutils literal"><span class="pre">GSUB</span> <span class="pre">ligature</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="single-positioning">
<span id="gpos-type-1"></span><h4>single (positioning)<a class="headerlink" href="#single-positioning" title="Permalink to this headline">¶</a></h4>
<p>Keyword and two entries per line: The type of positioning (advance modification
of x/y movement) is specified by the <a class="reference internal" href="#postype"><span>keyword</span></a>, the amount by
the <a class="reference internal" href="#value"><span>value</span></a>:</p>
<div class="highlight-python"><div class="highlight"><pre>position type &lt;T&gt; &lt;Gl&gt; &lt;T&gt; value
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gpossingle.txt"><code class="xref download docutils literal"><span class="pre">GPOS</span> <span class="pre">single</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="pair-or-kernset-positioning">
<span id="gpos-type-2"></span><h4>pair or kernset (positioning)<a class="headerlink" href="#pair-or-kernset-positioning" title="Permalink to this headline">¶</a></h4>
<p>It is possible to do pair kerning in two formats: one is  a list of kern pair
<em>glyphs</em> in the same way as we do in kern tables or in AFM files. This is most
suited for small tables. The second is assigning glyphs to <em>classes</em>. Then the
kerning values are declared for combinations of these classes. This format is
best suited for larger kern tables with many accented characters sharing
metrics. The glyph list format uses lines in this format:</p>
<div class="highlight-python"><div class="highlight"><pre>position type &lt;T&gt; &lt;LeftGl&gt; &lt;T&gt; &lt;RightGl&gt; &lt;T&gt; value
</pre></div>
</div>
<p>Keyword and three entries per line. The type of positioning (advance
modification of x/y movement) is specified by the <a class="reference internal" href="#postype"><span>keyword</span></a>, the
amount by the <a class="reference internal" href="#value"><span>value</span></a>. The Left glyph needs to be interpreted as
being the first in the text (in case of right-to-left fonts it is therefore the
right glyph).</p>
<p>The class format starts by two lists assigning glyphs to left/first and
right/second classes. It is then followed by a list similar to the glyph list
format, with class indices taking the place of glyph references:</p>
<div class="highlight-python"><div class="highlight"><pre>firstclass definition begin
&lt;Gl&gt; &lt;T&gt; class
class definition end

secondclass definition begin
&lt;Gl&gt; &lt;T&gt; class
class definition end

position type &lt;T&gt; firstClass &lt;T&gt; secondClass &lt;T&gt; value
</pre></div>
</div>
<p>Class definitions have two entries per line, glyph reference and class index.
Start class values at 1. The class value 0 refers to all glyphs that aren&#8217;t
assigned to another class.</p>
<p>A <code class="docutils literal"><span class="pre">kernset</span></code> is a combination of the <code class="docutils literal"><span class="pre">glyph</span></code> and <code class="docutils literal"><span class="pre">class</span></code> formats: a
subtable of glyph pairs precedes a subtable of class pairs, with the glyph
pairs acting as &#8220;exceptions&#8221; to the class pair definitions.</p>
<p><a class="reference download internal" href="downloads/gpospairglyph.txt"><code class="xref download docutils literal"><span class="pre">GPOS</span> <span class="pre">pair</span> <span class="pre">(glyph)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
<p><a class="reference download internal" href="downloads/gpospairclass.txt"><code class="xref download docutils literal"><span class="pre">GPOS</span> <span class="pre">pair</span> <span class="pre">(class)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
<p><a class="reference download internal" href="downloads/gposkernset.txt"><code class="xref download docutils literal"><span class="pre">GPOS</span> <span class="pre">kernset</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="cursive-positioning">
<span id="gpos-type-3"></span><h4>cursive (positioning)<a class="headerlink" href="#cursive-positioning" title="Permalink to this headline">¶</a></h4>
<p>The Anchor type keyword is either <code class="docutils literal"><span class="pre">entry</span></code> for where a stroke enters the glyph or <code class="docutils literal"><span class="pre">exit</span></code> where a stroke leaves the glyph. The <a class="reference internal" href="#anchor"><span>anchor coordinate</span></a> is the location of the anchor. The index of the point of the outline at the coordinate is optional.:</p>
<div class="highlight-python"><div class="highlight"><pre>Anchor type &lt;T&gt; &lt;Gl&gt; &lt;T&gt; anchorCoordinate &lt;T&gt; pointIndex
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gposcursive.txt"><code class="xref download docutils literal"><span class="pre">GPOS</span> <span class="pre">cursive</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="mark-to-base-and-mark-to-mark-positioning">
<span id="gpos-type-4"></span><h4>mark to base and mark to mark (positioning)<a class="headerlink" href="#mark-to-base-and-mark-to-mark-positioning" title="Permalink to this headline">¶</a></h4>
<p>The GlyphType keyword is either <code class="docutils literal"><span class="pre">base</span></code> or <code class="docutils literal"><span class="pre">mark</span></code>. It is followed by the glyph reference and the Anchor class, which is a decimal index number. The <a class="reference internal" href="#anchor"><span>coordinate</span></a> of the anchor point is required, but the index of the point in the outline at the coordinate is optional:</p>
<div class="highlight-python"><div class="highlight"><pre>GlyphType &lt;T&gt; &lt;Gl&gt; &lt;T&gt; anchorClass &lt;T&gt; anchorCoordinate &lt;T&gt; pointIndex
</pre></div>
</div>
<p>In a mark to mark lookup, the marks that other marks are attached to (&#8220;base marks&#8221;) use the <code class="docutils literal"><span class="pre">base</span></code> keyword.</p>
<p>In scripts such as the Indics where ligatures are used as single entities, accent positioning on these glyphs can be done with a mark to base rather than a mark to ligature lookup.</p>
<p>Within a lookup marks can belong to one class only. If there is more than one class of marks, all base glyphs are expected to have an anchor for each class. For marks with several anchors or when base glyphs do not have anchors for all classes of marks, it is recommended to use separate lookups for the classes.</p>
<p><a class="reference download internal" href="downloads/gposmarktobase.txt"><code class="xref download docutils literal"><span class="pre">GPOS</span> <span class="pre">mark</span> <span class="pre">to</span> <span class="pre">base/mark</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="mark-to-ligature-positioning">
<span id="gpos-type-5"></span><h4>mark to ligature (positioning)<a class="headerlink" href="#mark-to-ligature-positioning" title="Permalink to this headline">¶</a></h4>
<p>This type of lookup differs from mark to base in that it allows marks to be positioned over a specific component part of a ligature glyph.
The declaration of attachment points on marks is identical to that in mark to base lookups:</p>
<div class="highlight-python"><div class="highlight"><pre>mark &lt;T&gt; &lt;Gl&gt; &lt;T&gt; anchorClass &lt;T&gt; anchorCoordinate &lt;T&gt; pointIndex
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">mark</span></code> keyword is followed by the glyph reference and the Anchor class. The coordinate of the anchor point is required, but the index of the point in the outline at the coordinate is optional.</p>
<p>The declarations for the attachment points include the index of the component, and the total number of components which the ligature represents:</p>
<div class="highlight-python"><div class="highlight"><pre>ligature &lt;T&gt; &lt;Gl&gt; &lt;T&gt; componentIndex &lt;T&gt; componentCount &lt;T&gt; anchorClass &lt;T&gt; anchorCoordinate &lt;T&gt; pointIndex
</pre></div>
</div>
<p>The index used for the first component is 1.</p>
<p>Fonts can support any number of anchor classes. However marks can only have 1 anchor point and belong to 1 class only within a single lookup. Use separate lookups for cases where marks have more than one attachment point for use in a mark to ligature table.</p>
<p>If the lowest anchor number isn&#8217;t 0 or if there are gaps in the class numbering, the font tool should renumber or this needs to be done manually.</p>
<p><a class="reference download internal" href="downloads/mark-to-ligature.txt"><code class="xref download docutils literal"><span class="pre">mark</span> <span class="pre">to</span> <span class="pre">ligature</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="context-substitution-and-positioning">
<span id="gsub-gpos-context"></span><h4>context (substitution and positioning)<a class="headerlink" href="#context-substitution-and-positioning" title="Permalink to this headline">¶</a></h4>
<p>This type of lookup is not used to directly list positioning or substitution actions. In a context table a set of rules is listed, where separate lookups are applied to certain glyph sequences. The general format of a <a class="reference internal" href="#contextrule"><span>rule</span></a> is:</p>
<div class="highlight-python"><div class="highlight"><pre>context type &lt;T&gt; inputSequence &lt;T&gt; action1 &lt;T&gt; action2 ...
</pre></div>
</div>
<p>First the type of context is declared. The input sequence consists of two or more entries, each representing a glyph or one of a group of glyphs. There can be one or more action items, which are used to declare what lookup is applied to which member of the sequence. These lookups follow the context lookup they are referenced by.</p>
<p>There are three types of contexts, each having its own keyword.</p>
<p><code class="docutils literal"><span class="pre">glyph</span></code>: In this type the input sequence is a list of two or more glyph references separated by commas. For example to apply a kerning positioning to a F in the context in which F is followed by a period and a quoteright:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">glyph</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">F</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">quoteright</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span><span class="n">F</span><span class="o">-</span><span class="n">kern</span><span class="o">-</span><span class="n">lookup</span><span class="o">-</span><span class="n">label</span>
</pre></div>
</div>
<p>In this type of context no additional information is required.</p>
<p><code class="docutils literal"><span class="pre">class</span></code>: In this type the input sequence is a list of two or more glyph classes separated by commas. The list of rules is preceded by a class definition. For example to apply a kerning positioning to a F in the context in which F is followed by a period or a comma and a quoteright or a quotesingle:</p>
<div class="highlight-python"><div class="highlight"><pre>class definition begin
F &lt;T&gt; 1
period &lt;T&gt; 2
comma &lt;T&gt; 2
quoteleft &lt;T&gt; 3
quotesingle &lt;T&gt; 3
class definition end

class &lt;T&gt; 1, 2, 3 &lt;T&gt; 1,F-kern-lookup-label
</pre></div>
</div>
<p>Start numbering classes by 1. the class 0 can be used to refer to any glyph not classified otherwise.</p>
<p><code class="docutils literal"><span class="pre">coverage</span></code>: In this type it is possible to have one rule per sub-table only. The rule is preceded by two or more coverage tables, which are lists of glyphs. The input sequence refers to these lists. This works a bit like the class format, with the difference that a glyph can be in more than one list/class. The example with the F would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>coverage definition begin &lt;T&gt; 0
F
coverage definition end

coverage definition begin &lt;T&gt; 1
period
comma
coverage definition end

coverage definition begin &lt;T&gt; 2
quoteleft
quotesingle
coverage definition end

coverage &lt;T&gt; 1,F-kern-lookup-label
</pre></div>
</div>
<p>Note that in the rule there is no entry for the sequence, because there is only one sequence possible. Each coverage table has an index number, starting with zero for the first.</p>
<p><a class="reference download internal" href="downloads/contextclass.txt"><code class="xref download docutils literal"><span class="pre">context</span> <span class="pre">(class)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
<p><a class="reference download internal" href="downloads/contextcoverage.txt"><code class="xref download docutils literal"><span class="pre">context</span> <span class="pre">(coverage)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
<p><a class="reference download internal" href="downloads/context-glyph.txt"><code class="xref download docutils literal"><span class="pre">context</span> <span class="pre">(glyph)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="chained-substitution-and-positioning">
<span id="gsub-gpos-chained"></span><h4>chained (substitution and positioning)<a class="headerlink" href="#chained-substitution-and-positioning" title="Permalink to this headline">¶</a></h4>
<p>This type of lookup is not used to directly list positioning or substitution
actions. In a context table a set of rules is listed, where separate lookups
are applied to certain glyph sequences. It differs from the context lookup in
that the context from the glyphs that are modified is stored separately: a
chain of contexts rather than one context. The general format of a rule is:</p>
<div class="highlight-python"><div class="highlight"><pre>context type &lt;T&gt; backtrackSequence &lt;T&gt; inputSequence &lt;T&gt; lookaheadSequence &lt;T&gt; action1 &lt;T&gt; action2 ...
</pre></div>
</div>
<p>First the type of context is declared. The input sequence consists of one or
more entries, each representing a glyph or one of a group of glyphs. These are
the glyphs that the actions are applied to. The backTrack and lookAhead
sequences are used to give the context of the glyphs that are modified, but
elements in these sequences cannot be modified themselves. A context can have
both a backtrack and a lookhead, or just one of them. If that is the case them
the entry in the rule can remain empty, but the number of &lt;T&gt;&#8217;s has to be
complete. There can be one or more action items, which are used to declare what
lookup is applied to which member of the sequence. These lookups follow the
context lookup they are referenced by.</p>
<p>There are three types of contexts, each having its own keyword.</p>
<p><code class="docutils literal"><span class="pre">glyph</span></code>: In this type the sequences are lists of one or more glyph references separated by commas. For example to apply a kerning positioning to a period in the context in which F is followed by a period and a quoteright:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">glyph</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">F</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">period</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">quoteright</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span><span class="n">F</span><span class="o">-</span><span class="n">kern</span><span class="o">-</span><span class="n">lookup</span><span class="o">-</span><span class="n">label</span>
</pre></div>
</div>
<p>In this type of context no additional information is required.</p>
<p><code class="docutils literal"><span class="pre">class-chain</span></code>: In this type the sequence are lists of one or more glyph classes separated by commas. The list of rules is preceded by a set of class definition. For example to apply a kerning positioning to a comma or period in the context in which F is followed by a period or a comma and a quoteright or a quotesingle:</p>
<div class="highlight-python"><div class="highlight"><pre>backtrackclass definition begin
F &lt;T&gt; 1
class definition end

class definition begin
period &lt;T&gt; 1
comma &lt;T&gt; 1
class definition end

lookaheadclass definition begin
quoteleft &lt;T&gt; 1
quotesingle &lt;T&gt; 1
class definition end

class-chain &lt;T&gt; 1 &lt;T&gt; 1 &lt;T&gt; 1 &lt;T&gt; 1,F-kern-lookup-label
</pre></div>
</div>
<p>Start numbering classes by 1. The class 0 can be used to refer to any glyph not classified otherwise. The backtrack and lookahead definitions are optional, but at least one of them has to be present. More about this <a class="reference internal" href="#more-chained"><span>here...</span></a></p>
<p><code class="docutils literal"><span class="pre">coverage</span></code>: In this type it is possible to have one rule per sub-table only. The rule is preceded by two or more coverage tables, which are lists of glyphs. The sequence refer to these lists. This works a bit like the class format, with the difference that a glyph can be in more than one list/class. The example with the F would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>backtrackcoverage definition begin
F
coverage definition end

inputcoverage definition begin
period
comma
coverage definition end

lookaheadcoverage definition begin
quoteleft
quotesingle
coverage definition end

coverage &lt;T&gt; 1,F-kern-lookup-label
</pre></div>
</div>
<p>Note that in the rule there is no entry for the sequence, because there is only one sequence possible. There can be any number of these coverage definitions. At least one inputcoverage table and at least one of the others are required.</p>
<p><a class="reference download internal" href="downloads/chainedclass.txt"><code class="xref download docutils literal"><span class="pre">chained</span> <span class="pre">(class)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
<p><a class="reference download internal" href="downloads/chainedcoverage.txt"><code class="xref download docutils literal"><span class="pre">chained</span> <span class="pre">(coverage)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
<p><a class="reference download internal" href="downloads/chained-glyph.txt"><code class="xref download docutils literal"><span class="pre">chained</span> <span class="pre">(glyph)</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="reversechained-substitution">
<span id="gsub-type-8"></span><h4>reversechained (substitution)<a class="headerlink" href="#reversechained-substitution" title="Permalink to this headline">¶</a></h4>
<p>This format combines chained context rules with <em>single</em> substitutions within a lookup. Either a backtrack coverage definition or lookahead coverage definition (or both) defining glyphs for the contexts, followed by <em>single</em> (glyph) substitution definitions:</p>
<div class="highlight-python"><div class="highlight"><pre>backtrackcoverage definition begin
&lt;Gl1&gt;
...
&lt;GLn&gt;
coverage definition end

lookaheadcoverage definition begin
&lt;Gl1&gt;
...
&lt;Gln&gt;
coverage definition end

&lt;input Gl1&gt; &lt;T&gt; &lt;output Gl1&gt;
...
&lt;input Gln&gt; &lt;T&gt; &lt;output Gln&gt;
</pre></div>
</div>
<p>It is important to note that for <code class="docutils literal"><span class="pre">reversechained</span></code> lookups, processing of the
input glyph sequence goes from the end to start, opposite of other lookup
types. This type is designed for Arabic and scripts like it where the shape of
a glyph is determined by a following glyph. See the <a class="reference external" href="https://www.microsoft.com/typography/otspec/GSUB.htm#RCCS">OpenType specification</a> for more
information.</p>
<p><a class="reference download internal" href="downloads/gsubreversechanined.txt"><code class="xref download docutils literal"><span class="pre">GSUB</span> <span class="pre">reversechained</span> <span class="pre">lookup</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="shared-by-various-lookups">
<h4>Shared by various lookups<a class="headerlink" href="#shared-by-various-lookups" title="Permalink to this headline">¶</a></h4>
<dl class="docutils" id="value">
<dt><strong>Value</strong></dt>
<dd>A value in Font Units.</dd>
</dl>
<dl class="docutils" id="postype">
<dt><strong>Position Type</strong></dt>
<dd><p class="first">The following keywords are used to describe the various positioning types
used in GPOS table entries:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">positionType</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;...</span>
</pre></div>
</div>
<p>Position types are:</p>
<ul class="last">
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">x</span> <span class="pre">advance</span></code></dt>
<dd><p class="first last">increase or decrease of advance width (hmtx)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">y</span> <span class="pre">advance</span></code></dt>
<dd><p class="first last">increase or decrease of vertical advance width (vmtx)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">x</span> <span class="pre">placement</span></code></dt>
<dd><p class="first last">shift character left or right without alteration of advance</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">y</span> <span class="pre">placement</span></code></dt>
<dd><p class="first last">shift character up or down without alteration of advance</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>In lookups with kern pairs these keywords are extended with left or right in
front of them, referring to the first and second element in the current reading
direction. For normal kerning we would therefore use left x advance.</p>
<dl class="docutils" id="anchor">
<dt><strong>Anchor coordinate</strong></dt>
<dd>Coordinate of an anchor point in font units as a x and y
pair, separated by a comma. For example: 238,1058 for horizontal 238 and
vertical 1058.</dd>
</dl>
<dl class="docutils" id="contextrule">
<dt><strong>Context action rule</strong></dt>
<dd><p class="first">This consists of an index into a context sequence, followed by the label of
the lookup which is applied to the glyph(s) that might be in the position
of that index. Index and label are separated by a comma. If there is more
than one lookup applied to a sequence the actions are separated by a &lt;T&gt;.
The position index of the first element of the sequence is 1. Please be
aware: in class context tables it is easy to confuse these index numbers
with the class numbers used in the context sequence. The number in the
action rule applies to the <em>position</em> in the sequence, not to the classes in
the sequence.</p>
<p class="last">When a context lookup is decompiled the label of the lookup is the index number
of the lookup.</p>
</dd>
</dl>
</div>
<div class="section" id="more-about-chained-context">
<span id="more-chained"></span><h4>More about chained context<a class="headerlink" href="#more-about-chained-context" title="Permalink to this headline">¶</a></h4>
<p>Suppose we have an input context of three glyphs, where we need to change the middle if it is surrounded by two others:</p>
<p>rule 1: If <strong>ABC</strong> then <strong>ACC</strong></p>
<p>and</p>
<p>rule 2: If <strong>CCC</strong> then <strong>CDC</strong></p>
<p>These input sequences can appear separate, but also together, then</p>
<p><strong>xxxxABCCxxxx</strong> needs to become <strong>xxxxACDCxxxx</strong></p>
<p>The problem with normal context lookups is that the pointer is moved after the
input context sequence after a match has been found. After <strong>ABC</strong> has been
turned into <strong>ACC</strong> the pointer is moved to investigate the next input sequence
<strong>Cxx</strong> and the <strong>CCC</strong> sequence is overlooked.</p>
<p>In the chained context lookup you can separate the input part from the rest of the context. This
allows you to look for context, while moving the pointer one step at the time,
by having a single glyph as the input. That means that when you check the next
input sequence, you can take into account the change just made, because the
previous input sequence has become the context of the next.</p>
<p>In a context lookup we have one set of classes, which you use to define the
context for the rules. But in a chained context lookup in class format we have
also a set of classes for the context before the input (the backtrack classes)
and a set for what comes after (the lookahead classes).</p>
<p>Of course you can have both lookahead and backtrack, or just one of the two.</p>
<p>Within these separate class tables you count the classes separately. In the
sample above we see three class 1 items in the sequence: these are class 1
items from different classifications. It isn&#8217;t saying bird #1, bird #1, bird
#1. It is saying duck #1, parrot #1, seagull #1.</p>
<p>The number 1 in the rule is a different number all together, it doesn&#8217;t refer
to glyphs. It refers to the position in the input sequence. The input sequence
contains 1 glyph (out of the possibly more than one glyphs in the class list).
So the rule says:</p>
<p>If you have input sequence of one of the glyphs class 1 in the input class
table, surrounded by one of class 1 of the lookhead and backtrack class tables,
then apply lookup &#8220;F-kern-lookup-label&#8221; to the first element of the input
sequence. Then move the text pointer by the amount of the input sequence, which
is one.</p>
</div>
</div>
<div class="section" id="gdef-table">
<h3><a class="toc-backref" href="#id8">GDEF Table</a><a class="headerlink" href="#gdef-table" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The typical way to generate a GDEF is to compile an MTap table.</p>
</div>
<p>The GDEF table is where numerous glyph properties, independent of the GPOS and
GSUB, are defined. This includes things like glyph categorization (Base, Mark,
Ligature, etc.), anchor points, ligature carets, and mark categorization.</p>
<p>Similar to GSUB and GPOS, the first line of a text file representing a GDEF is:</p>
<div class="highlight-python"><div class="highlight"><pre>FontDame GDEF table
</pre></div>
</div>
<div class="section" id="glyph-classes">
<h4>Glyph Classes<a class="headerlink" href="#glyph-classes" title="Permalink to this headline">¶</a></h4>
<p>Glyphs defined in GDEF glyph classes are what are used in the GSUB and GPOS
lookup flags (<code class="docutils literal"><span class="pre">ignoreBaseGlyphs</span></code>, <code class="docutils literal"><span class="pre">ignoreLigatures</span></code>, <code class="docutils literal"><span class="pre">ignoreMarks</span></code>).
Classes can be a number from 1 to 4:</p>
<ul class="simple">
<li>1 - Base</li>
<li>2 - Ligature</li>
<li>3 - Mark</li>
<li>4 - Component (note, these are not referenced by the GSUB or GPOS)</li>
</ul>
<p>Glyphs not explicitly assigned to a class are considered to be in class 0 (&#8220;no
class&#8221;). The syntax for defining glyph classes is:</p>
<div class="highlight-python"><div class="highlight"><pre>class definition begin
&lt;Gl&gt; &lt;T&gt; &lt;classNumber&gt;
class definition end
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gdefclasses.txt"><code class="xref download docutils literal"><span class="pre">glyph</span> <span class="pre">class</span> <span class="pre">definition</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="attachment-point-list">
<h4>Attachment Point List<a class="headerlink" href="#attachment-point-list" title="Permalink to this headline">¶</a></h4>
<p>Attachment (anchor) points are point numbers on the glyph outline which can be
used as references for positioning glyphs. Define anchor points with a glyph
reference followed by one or more point numbers, separated by &lt;T&gt;:</p>
<div class="highlight-python"><div class="highlight"><pre>attachment list begin
&lt;Gl&gt; &lt;T&gt; &lt;point1&gt; &lt;T&gt; &lt;point2&gt; ...
attachment list end
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gdefattach.txt"><code class="xref download docutils literal"><span class="pre">attachment</span> <span class="pre">point</span> <span class="pre">definition</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="ligature-caret-lists">
<h4>Ligature Caret Lists<a class="headerlink" href="#ligature-caret-lists" title="Permalink to this headline">¶</a></h4>
<p>Ligature Carets are x-coordinates on a glyph, designating where the caret
(cursor) should be placed when selecting a component of a ligature glyph. For
example, an &#8216;fi&#8217; ligature might contain a single ligature caret somewhere
between the right side of the &#8216;f&#8217; and the left side of the &#8216;i&#8217; portion of the
glyph.</p>
<p>Ligature carets are defined with a glyph reference, followed by a number
designating the number of carets, then that number of integers which are
x-coordinate values, defining the caret positions:</p>
<div class="highlight-python"><div class="highlight"><pre>carets begin
&lt;Gl&gt; &lt;T&gt; &lt;numberOfCarets&gt; &lt;T&gt; X1 &lt;T&gt; X2 ...
carets end
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gdefligcaret.txt"><code class="xref download docutils literal"><span class="pre">ligature</span> <span class="pre">caret</span> <span class="pre">definition</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="mark-attachment-classes">
<h4>Mark Attachment Classes<a class="headerlink" href="#mark-attachment-classes" title="Permalink to this headline">¶</a></h4>
<p>Mark Attachment Classes are an additional level of specifying marks. These can
be used in conjunction with the <code class="docutils literal"><span class="pre">markattachmenttype</span></code> lookup flag to enable
lookups to ignore marks other than those that are part of the class specified
by the <code class="docutils literal"><span class="pre">markattachmenttype</span></code> flag as described above. A mark can only belong
to a single mark attachment class.</p>
<p>Create mark attachment classes with a glyph reference and a class number, separated by &lt;T&gt;:</p>
<div class="highlight-python"><div class="highlight"><pre>mark attachment class definition begin
&lt;Gl&gt; &lt;T&gt; &lt;markClassNumber&gt;
class definition end
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gdefmarkattach.txt"><code class="xref download docutils literal"><span class="pre">mark</span> <span class="pre">attachment</span> <span class="pre">class</span> <span class="pre">definition</span> <span class="pre">example</span></code></a></p>
</div>
<div class="section" id="mark-glyph-sets-mark-filtering-sets">
<h4>Mark Glyph Sets (Mark Filtering Sets)<a class="headerlink" href="#mark-glyph-sets-mark-filtering-sets" title="Permalink to this headline">¶</a></h4>
<p>Mark glyph sets, also known as mark <em>filter</em> sets, are somewhat similar to mark
attachment classes in that they allow a specific sub-category of marks to be
ignored. The main difference is that a glyph can belong to any number of mark
glyph sets This allows greater flexibility when using sets in lookups with the
<code class="docutils literal"><span class="pre">markfiltertype</span></code> flag as described above. However, like mark attachment
classes, only a single set may be specified per lookup.</p>
<p>To define mark filter sets, use a glyph reference followed by a set number. <strong>Begin set numbering at 0</strong> (font tools should automatically renumber and report if you forget, but most important is that any references to mark glyph sets in GSUB or GPOS lookups must reference the renumbered sets. Syntax:</p>
<div class="highlight-python"><div class="highlight"><pre>markfilter set definition begin
&lt;Gl&gt; &lt;T&gt; &lt;markSetNumber&gt;
set definition end
</pre></div>
</div>
<p><a class="reference download internal" href="downloads/gdefmarkfilter.txt"><code class="xref download docutils literal"><span class="pre">markfilter</span> <span class="pre">set</span> <span class="pre">definition</span> <span class="pre">example</span></code></a></p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">OpenType Layout Table Source 1.0.0 Documentation </a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
	<div class="footer" role="contentinfo">
        Copyright &copy; 2015 Monotype Imaging Inc. All rights reserved.
    </div>
    </div>
  </body>
</html>
